<% layout('layouts/boilerplate') -%>

<div id="map"></div>

<div class="blog-home2 spacer">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 text-center">
                <h2 class="title">Recent Posts</h2>
                <h6 class="subtitle">Check out our lastest listings</h6>
            </div>
        </div>
        <div class="row m-t-40">
            <% recentPosts.forEach(post => { %>
                <div class="col-md-4 col-sm-6 col-xs-6">
                    <div class="card shadow" data-aos="flip-left" data-aos-duration="1200" >
                        <a href="/posts/<%= post.id %>"><img src="<%= post.images[0].url %>" alt="wrappixel kit" class="card-img-top" ></a>
                        <div class="date-pos bg-danger-gradiant">
                            <%= moment(post._id).format('MMM') %><span><%= moment(post._id).format('D') %></span>
                        </div>
                        <h5 class="font-medium my-3 px-3">
                            <a href="/posts/<%= post.id %>" class="link"><%= post.title %></a>
                        </h5>
                        <p class="my-1 px-3"><%= post.location %></p>
                        <a href="/posts/<%= post.id %>" class="linking text-danger my-1 px-3">Learn More<i class="ti-arrow-right"></i></a>
                    </div>
                </div>
            <% }) %>
        </div>
    </div>
</div>


<script>
    mapboxgl.accessToken = "<%= mapBoxToken %>";
    var posts = { features: <%- JSON.stringify(posts) %> };
</script>
<script src="/javascripts/allPostsClusterMap.js"></script>